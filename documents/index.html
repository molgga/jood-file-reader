<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow-eighties.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="styles/style.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BlobImageResize.html">BlobImageResize</a><ul class='methods'><li data-type='method'><a href="BlobImageResize.html#create">create</a></li><li data-type='method'><a href="BlobImageResize.html#draw">draw</a></li><li data-type='method'><a href="BlobImageResize.html#getMaxSize">getMaxSize</a></li><li data-type='method'><a href="BlobImageResize.html#getResizeToCover">getResizeToCover</a></li><li data-type='method'><a href="BlobImageResize.html#getResizeToCoverStretch">getResizeToCoverStretch</a></li><li data-type='method'><a href="BlobImageResize.html#getResizeToFixed">getResizeToFixed</a></li><li data-type='method'><a href="BlobImageResize.html#getResizeToScale">getResizeToScale</a></li><li data-type='method'><a href="BlobImageResize.html#getResizeToScaleStretch">getResizeToScaleStretch</a></li><li data-type='method'><a href="BlobImageResize.html#onImageError">onImageError</a></li><li data-type='method'><a href="BlobImageResize.html#onImageLoaded">onImageLoaded</a></li><li data-type='method'><a href="BlobImageResize.html#onResized">onResized</a></li><li data-type='method'><a href="BlobImageResize.html#parseDrawBound">parseDrawBound</a></li><li data-type='method'><a href="BlobImageResize.html#parseDrawMetadata">parseDrawMetadata</a></li></ul></li><li><a href="BlobImageResize_BlobImageResize.html">BlobImageResize</a></li><li><a href="FileReadStream.html">FileReadStream</a><ul class='methods'><li data-type='method'><a href="FileReadStream.html#abort">abort</a></li><li data-type='method'><a href="FileReadStream.html#destroy">destroy</a></li><li data-type='method'><a href="FileReadStream.html#getState">getState</a></li><li data-type='method'><a href="FileReadStream.html#next">next</a></li><li data-type='method'><a href="FileReadStream.html#observeState">observeState</a></li><li data-type='method'><a href="FileReadStream.html#onReaderError">onReaderError</a></li><li data-type='method'><a href="FileReadStream.html#onReaderLoaded">onReaderLoaded</a></li><li data-type='method'><a href="FileReadStream.html#resultReject">resultReject</a></li><li data-type='method'><a href="FileReadStream.html#resultResolve">resultResolve</a></li><li data-type='method'><a href="FileReadStream.html#start">start</a></li><li data-type='method'><a href="FileReadStream.html#stateChanged">stateChanged</a></li></ul></li><li><a href="FileReadStream_FileReadStream.html">FileReadStream</a></li></ul><h3>Interfaces</h3><ul><li><a href="DrawBound.html">DrawBound</a></li><li><a href="FileReadConfig.html">FileReadConfig</a></li><li><a href="FileReadEvent.html">FileReadEvent</a></li><li><a href="FileReadState.html">FileReadState</a></li><li><a href="ResizeConfig.html">ResizeConfig</a></li><li><a href="ResizeResult.html">ResizeResult</a></li></ul><h3>Global</h3><ul><li><a href="global.html#FileReadEventType">FileReadEventType</a></li><li><a href="global.html#FileReadResponseType">FileReadResponseType</a></li><li><a href="global.html#ResizeType">ResizeType</a></li></ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>@jood/file-reader</h1>
<p>javascript clientside file reader</p>
<hr>
<p><img src="https://travis-ci.org/molgga/jood-file-reader.svg?branch=master" alt="TRAVIS">
<img src="https://img.shields.io/npm/v/@jood/file-reader.svg" alt="NPM version">
<img src="https://img.shields.io/npm/l/@jood/file-reader" alt="NPM license">
<img src="https://img.shields.io/npm/dt/@jood/file-reader" alt="NPM download">
<img src="https://img.shields.io/bundlephobia/min/@jood/file-reader" alt="NPM bundle size"></p>
<hr>
<h2>FileReadStream</h2>
<p>(한번에 읽기 어려운)파일 읽기</p>
<ul>
<li>chunkSize: number (default: 1024 * 1024 * 10) - 파일을 1회 읽을 때 byte 량</li>
<li>responseType: FileReadResponseType (BLOB) - 파일을 읽기 완료 시 반환될 결과(Blob || ArrayBuffer[])
<ul>
<li>BLOB - 결과값을 blob(Blob) 으로 반환.</li>
<li>BUFFER - 결과값을 buffers(ArrayBuffers[]) 로 반환.</li>
</ul>
</li>
</ul>
<h3>Promise</h3>
<pre class="prettyprint source lang-typescript"><code>import { FileReadStream, FileReadEvent, FileReadEventType, FileReadResponseType } from '@jood/file-reader';

const onFileInputChange = async (evt: Event) => {
  const file = (evt.target as HTMLInputElement).files[0];
  const reader = new FileReadStream(file, {
    chunkSize: 1024 * 10,
    responseType: FileReadResponseType.BLOB,
  });
  try {
    const { state } = await reader.start();
    const {
      fileName,
      fileType,
      fileSize,
      fileLastModified,
      total, // byte total
      readed, // byte read
      chunkSize, // config chunkSize
      responseType, // config responseType
      blob, // if responseType BLOB
      buffers, // if responseType BUFFER
    } = state;
    console.log('resolve', state);
  } catch (err) {
    console.error(err);
  }
}
</code></pre>
<h3>Observable</h3>
<pre class="prettyprint source lang-typescript"><code>import { FileReadStream, FileReadEvent, FileReadEventType, FileReadResponseType } from '@jood/file-reader';

const onFileInputChange = (evt: Event) => {
  const file = (evt.target as HTMLInputElement).files[0];
  const reader = new FileReadStream(file, {
    chunkSize: 1024 * 10,
    responseType: FileReadResponseType.BLOB,
  });
  console.log(reader);
  reader.observeState().subscribe((evt) => {
    const { type, state, error } = evt;
    if (type === FileReadEventType.CHANGE) {
      console.log('change', state.readed / state.total);
    } else if (type === FileReadEventType.RESOLVE) {
      console.log('resolve', state.blob);
    } else if (type === FileReadEventType.REJECT) {
      console.log('reject', error);
    }
  });
  reader.start();
}
</code></pre>
<hr>
<h2>BlobImageResize</h2>
<p>이미지의 리사이징, quality 보정</p>
<ul>
<li>
<p>expectWidth: number - 리사이징 예상 width</p>
</li>
<li>
<p>expectHeight: number - 리사이징 예상 height</p>
</li>
<li>
<p>resizeType: ResizeType (default=ResizeType.SCALE) - 리사이징 타입. expectWidth, expectHeight 기준.</p>
<ul>
<li>COVER - 여백 없이 expect 사이즈를 채움. 원본이 expect 사이즈 보다 작은 경우 늘리지 않음.</li>
<li>COVER_STRETCH - 여백 없이 expect 사이즈를 채움. 원본이 expect 사이즈 보다 작은 경우 늘림.</li>
<li>SCALE - 이미지 비율 유지, 원본이 expect 사이즈 보다 작은 경우 늘리지 않음.</li>
<li>SCALE_STRETCH - 이미지 비율 유지, 원본이 expect 사이즈 보다 작은 경우 작은것을 기준으로 늘림.</li>
</ul>
</li>
<li>
<p>quality(default=0.9) - 이미지 퀄리티((0 &lt; n &lt; 1) ~ 1);</p>
</li>
<li>
<p>expectContentType: string (default=undefined) - quality 는 image/jpeg 타입인 경우만 적용됨, 강제로 type 을 지정하여 quality 적용을 하려는 경우 사용.
\ 예) image/png 타입인 file 의 경우 image/jpeg 로 강제 지정하면 quality 적용은 가능하고, 대신 이미지의 transparent 영역이 canvas 의 기본 배경색으로 채워짐.</p>
</li>
<li>
<p>fillBgColor: string (default=undefined) - expectContentType 을 지정하는 경우 transparent 처리가 canvas 의 기본색상으로 채워지는데 그때 적용될 color 값.</p>
</li>
<li>
<p>applyOrientation: boolean (default=0) - exif orientation 정보가 있는 경우 orientation 값을 적용하여 resize. <br>
<a href="https://github.com/recurser/exif-orientation-examples">참고: 이미지 샘플 github</a> <br>
<a href="https://zpjiang.me/2019/12/28/iphone-image-rotation/">참고: iPhone Photo Orientation/Rotation in Browser</a></p>
</li>
</ul>
<h3>Promise</h3>
<pre class="prettyprint source lang-typescript"><code>import { BlobImageResize } from '@jood/file-reader';
const onFileInputChange = async (evt: Event) => {
  const file = (evt.target as HTMLInputElement).files[0];
  const blob = new Blob([file], { type: file.type });
  const resizer = new BlobImageResize(blob, {
    resizeType: ResizeType.COVER,
    expectWidth: 200,
    expectHeight: 200,
    quality: 0.9,
  });
  try {
    const { blob, width, height } = await resizer.create();
    const resizedFile = new File([blob], file.name, {
      lastModified: file.lastModified || Date.now(),
    });
    console.log(resizedFile);
  } catch (err) {
    console.error(err);
  }
}
</code></pre>
<h3>See</h3>
<ul>
<li><a href="https://molgga.github.io/jood-file-reader">Example(web)</a>.</li>
<li><a href="https://github.com/molgga/jood-file-reader/tree/master/packages/dev/app/pages/demo">Example(source)</a>.</li>
<li><a href="https://github.com/molgga/jood-file-reader">Github</a>.</li>
<li><a href="https://www.npmjs.com/package/@jood/file-reader">NPM</a>.</li>
<li><a href="https://molgga.github.io/jood-file-reader/documents">Doc</a>.</li>
</ul>
<hr>
<p>This library was generated with <a href="https://github.com/angular/angular-cli">Angular CLI</a></p></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated at Wed Sep 23 2020 07:51:20 GMT+0000 (Coordinated Universal Time)
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>